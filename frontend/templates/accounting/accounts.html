{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h1><i class="fas fa-sitemap me-2"></i>Pla Comptable</h1>
        <p class="text-muted">Gestió del pla de comptes i grups comptables</p>
    </div>
    <div class="col-md-4 text-end">
        <a href="/accounting/accounts/create" class="btn btn-primary">
            <i class="fas fa-plus me-1"></i> Nou Compte
        </a>
    </div>
</div>

<div class="card shadow-sm mb-4">
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
        <span class="fw-bold text-corporate"><i class="fas fa-filter me-2"></i>Filtres</span>
    </div>
    <div class="card-body bg-light">
        <form action="/accounting/accounts" method="GET" class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="group" class="col-form-label fw-bold">Filtrar per Grup:</label>
            </div>
            <div class="col-md-6">
                <select name="group" id="group" class="form-select" onchange="this.form.submit()">
                    <option value="">Tots els grups</option>
                    <option value="1" {% if selected_group==1 %}selected{% endif %}>Grup 1 - Finançament Bàsic</option>
                    <option value="2" {% if selected_group==2 %}selected{% endif %}>Grup 2 - Actiu No Corrent</option>
                    <option value="3" {% if selected_group==3 %}selected{% endif %}>Grup 3 - Existències</option>
                    <option value="4" {% if selected_group==4 %}selected{% endif %}>Grup 4 - Creditors i Deutors
                    </option>
                    <option value="5" {% if selected_group==5 %}selected{% endif %}>Grup 5 - Comptes Financers</option>
                    <option value="6" {% if selected_group==6 %}selected{% endif %}>Grup 6 - Compres i Despeses</option>
                    <option value="7" {% if selected_group==7 %}selected{% endif %}>Grup 7 - Vendes i Ingressos</option>
                </select>
            </div>
        </form>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover table-striped table-bordered mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width: 15%;">Codi</th>
                        <th style="width: 50%;">Nom del Compte</th>
                        <th style="width: 15%;">Tipus</th>
                        <th style="width: 20%;" class="text-center">Accions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for account in accounts %}
                    <tr>
                        <td class="font-monospace fw-bold">
                            <a href="/accounting/ledger/{{ account.code }}" class="text-decoration-none">{{ account.code
                                }}</a>
                        </td>
                        <td>{{ account.name }}</td>
                        <td>
                            <span class="badge bg-secondary">{{ account.account_type.value }}</span>
                        </td>
                        <td class="text-center">
                            <a href="/accounting/ledger/{{ account.code }}" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-list-alt me-1"></i> Veure Major
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}